<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Jasmine Spec Runner</title>

  <link rel="shortcut icon" type="image/png" href="lib/jasmine-1.3.1/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="lib/jasmine-1.3.1/jasmine.css">
  <script type="text/javascript" src="lib/jasmine-1.3.1/jasmine.js"></script>
  <script type="text/javascript" src="lib/jasmine-1.3.1/jasmine-html.js"></script>

  <script type="text/javascript">
    (function() {
      var jasmineEnv = jasmine.getEnv();
      jasmineEnv.updateInterval = 1000;

      var htmlReporter = new jasmine.HtmlReporter();

      jasmineEnv.addReporter(htmlReporter);

      jasmineEnv.specFilter = function(spec) {
        return htmlReporter.specFilter(spec);
      };

      var currentWindowOnload = window.onload;

      window.onload = function() {
        if (currentWindowOnload) {
          currentWindowOnload();
        }
        execJasmine();
      };

      function execJasmine() {
        jasmineEnv.execute();
      }

    })();
  </script>

  <script src="aquery.js"></script>

</head>

<body>

  <div class="root">
    <div class="multiple a">
      <div class="b"></div>
    </div>
    <div class="a"></div>
    <div class="b"></div>
    <div id="context">
      <div class="c"></div>
    </div>
    <div class="c"></div>
  </div>

<script>
  describe('selectors', function () {
    describe('class-selectors', function () {
      it('should find by a single class', function () {
        var elements = $('.root');

        expect(elements.length).toEqual(1);
      });

      it('should find even if the class isn\'t the only class', function () {
        var elements = $('.a');
        expect(elements.length).toEqual(2);
      });

      it('should find by multiple classes', function () {
        var elements = $('.a.multiple');
        expect(elements.length).toEqual(1);
      });

      it('should have an indexer position for the matched elements', function () {
        var elements = $('.a');
        expect(elements[0]).toBeDefined();
        expect(elements[1]).toBeDefined();
      });

      it('should optimise call if single className provided', function () {
        var cnspy = spyOn(document, 'getElementsByClassName').andCallThrough();
        var elements = $('.a');
        expect(cnspy.wasCalled).toEqual(true);
      });

      it('should allow a query context', function () {
        var elements = $('.c', document.getElementById('context'));

        expect(elements.length).toEqual(1);
      });

      it('should allow context based on existing selector', function () {
        var context = $('#context');
        var elements = context.find('.c');

        expect(elements.length).toEqual(1);
      });
    });

    describe('id-selectors', function () {
      it('should find by id', function () {
        var element = $('#context');
        expect(element.length).toEqual(1);
      });

      it('should optimise call to getElementById', function () {
        var idspy = spyOn(document, 'getElementById').andCallThrough();
        var element = $('#context');
        expect(idspy.wasCalled).toEqual(true);
        expect(element[0]).toBeDefined();
      });
    });
  });
</script>

</body>
</html>
